<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>UpLinkAI Feedback</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { font-family: 'Poppins', sans-serif; }
    #feedbackList::-webkit-scrollbar { width: 6px; }
    #feedbackList::-webkit-scrollbar-thumb { background: #6366f1; border-radius: 20px; }
  </style>
</head>
<body class="bg-indigo-50 text-gray-900 min-h-screen flex flex-col">

  <!-- Header -->
  <header class="bg-indigo-700 text-white p-4 shadow-md">
    <div class="max-w-4xl mx-auto flex justify-between items-center">
      <h1 class="text-2xl font-bold">üìã UpLinkAI Feedback</h1>
      <button onclick="toggleAdminPanel()" 
              class="bg-indigo-900 px-4 py-2 rounded-lg text-sm font-semibold hover:bg-indigo-800">
        Admin Login
      </button>
    </div>
  </header>

  <!-- Main -->
  <main class="flex-grow max-w-4xl mx-auto p-6">
    <!-- Feedback Form -->
    <form id="feedbackForm" class="bg-white p-6 rounded-lg shadow-md space-y-4">
      <h2 class="text-lg font-semibold">Submit Your Feedback</h2>
      <input type="text" id="name" placeholder="Your Name" required
             class="w-full border rounded-lg p-2 focus:ring-2 focus:ring-indigo-500">
      <input type="email" id="email" placeholder="Your Email" required
             class="w-full border rounded-lg p-2 focus:ring-2 focus:ring-indigo-500">
      <input type="text" id="college" placeholder="Your College/University" required
             class="w-full border rounded-lg p-2 focus:ring-2 focus:ring-indigo-500">
      <textarea id="feedback" placeholder="Write your feedback here..." required
                class="w-full border rounded-lg p-2 h-24 focus:ring-2 focus:ring-indigo-500"></textarea>
      <label class="flex items-center gap-2">
        <input type="checkbox" id="public" class="w-4 h-4"> 
        <span class="text-sm">Make my feedback public</span>
      </label>
      <button type="submit"
              class="w-full bg-indigo-600 text-white py-2 rounded-lg font-semibold hover:bg-indigo-700">
        Submit Feedback
      </button>
    </form>

    <!-- Feedback List -->
    <div class="mt-6">
      <h2 class="text-lg font-semibold">üí¨ Public Feedback</h2>
      <div id="feedbackList" class="mt-4 space-y-4 max-h-96 overflow-y-auto"></div>
    </div>
  </main>

  <!-- Admin Panel -->
  <div id="adminPanel" class="hidden fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center">
    <div class="bg-white p-6 rounded-lg shadow-lg max-w-2xl w-full">
      <h2 class="text-xl font-bold mb-4">üîê Admin Panel</h2>
      <div id="adminLogin" class="space-y-4">
        <input type="password" id="adminPin" placeholder="Enter Admin PIN"
               class="w-full border rounded-lg p-2 focus:ring-2 focus:ring-indigo-500">
        <button onclick="checkAdminPin()" 
                class="w-full bg-indigo-600 text-white py-2 rounded-lg font-semibold hover:bg-indigo-700">
          Login
        </button>
      </div>
      <div id="adminContent" class="hidden">
        <h3 class="text-lg font-semibold mb-2">All Feedback (Admin View)</h3>
        <div id="allFeedbackList" class="max-h-80 overflow-y-auto space-y-3 mb-4 border p-2 rounded-lg"></div>
        <div class="flex gap-2">
          <button onclick="exportData('json')" 
                  class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700">Export JSON</button>
          <button onclick="exportData('csv')" 
                  class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">Export CSV</button>
          <button onclick="closeAdminPanel()" 
                  class="bg-gray-400 text-white px-4 py-2 rounded-lg hover:bg-gray-500">Close</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="bg-indigo-100 text-center py-3 text-sm text-indigo-700">
    Made with ‚ù§Ô∏è by <strong>UpLinkAI</strong> ‚Ä¢ UpLinkAI 2025
  </footer>

<script>
  const feedbackForm = document.getElementById("feedbackForm");
  const feedbackList = document.getElementById("feedbackList");
  const allFeedbackList = document.getElementById("allFeedbackList");
  const adminPanel = document.getElementById("adminPanel");
  const adminLogin = document.getElementById("adminLogin");
  const adminContent = document.getElementById("adminContent");

  const ADMIN_PIN = "2468"; // change this PIN for security

  let feedbackData = JSON.parse(localStorage.getItem("uplinkai_feedback")) || [];

  function saveFeedback(data) {
    feedbackData.push(data);
    localStorage.setItem("uplinkai_feedback", JSON.stringify(feedbackData));
  }

  function displayFeedback() {
    feedbackList.innerHTML = "";
    feedbackData.filter(f => f.public).forEach(f => {
      const div = document.createElement("div");
      div.className = "p-3 bg-indigo-100 rounded-lg shadow";
      div.innerHTML = `<strong>${f.name}</strong> (${f.college})<br>
                       <span class="text-sm">${f.feedback}</span>`;
      feedbackList.appendChild(div);
    });
  }

  function displayAllFeedback() {
    allFeedbackList.innerHTML = "";
    feedbackData.forEach(f => {
      const div = document.createElement("div");
      div.className = "p-3 bg-gray-100 rounded-lg shadow";
      div.innerHTML = `<strong>${f.name}</strong> (${f.college}) - <em>${f.email}</em><br>
                       <span class="text-sm">${f.feedback}</span> 
                       ${f.public ? "<span class='text-green-600'>(Public)</span>" : "<span class='text-red-600'>(Private)</span>"}`;
      allFeedbackList.appendChild(div);
    });
  }

  feedbackForm.addEventListener("submit", e => {
    e.preventDefault();
    const data = {
      name: document.getElementById("name").value,
      email: document.getElementById("email").value,
      college: document.getElementById("college").value,
      feedback: document.getElementById("feedback").value,
      public: document.getElementById("public").checked
    };
    saveFeedback(data);
    feedbackForm.reset();
    displayFeedback();
    alert("‚úÖ Feedback submitted successfully!");
  });

  function toggleAdminPanel() {
    adminPanel.classList.toggle("hidden");
    adminLogin.classList.remove("hidden");
    adminContent.classList.add("hidden");
  }

  function closeAdminPanel() {
    adminPanel.classList.add("hidden");
  }

  function checkAdminPin() {
    const pin = document.getElementById("adminPin").value;
    if (pin === ADMIN_PIN) {
      adminLogin.classList.add("hidden");
      adminContent.classList.remove("hidden");
      displayAllFeedback();
    } else {
      alert("‚ùå Incorrect PIN");
    }
  }

  function exportData(type) {
    if (type === "json") {
      const blob = new Blob([JSON.stringify(feedbackData, null, 2)], { type: "application/json" });
      const url = URL.createObjectURL(blob);
      downloadFile(url, "feedback.json");
    } else if (type === "csv") {
      const csv = "Name,Email,College,Feedback,Public\n" + 
        feedbackData.map(f => `${f.name},${f.email},${f.college},"${f.feedback}",${f.public}`).join("\n");
      const blob = new Blob([csv], { type: "text/csv" });
      const url = URL.createObjectURL(blob);
      downloadFile(url, "feedback.csv");
    }
  }

  function downloadFile(url, filename) {
    const a = document.createElement("a");
    a.href = url;
    a.download = filename;
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
  }

  // Initial load
  displayFeedback();
</script>
</body>
</html>
